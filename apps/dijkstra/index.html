<!DOCTYPE html>
<html>
    <head>
        <title>Dijkstra's Solver</title>
        <meta charset="utf-8">
        <script src="js/jquery.min.js"></script>
        <script src="js/arbor.js"></script>
        <script src="js/main.js"></script>

        <script>
            var placeholder = 'n\nsource\tdestination\tcost\nsource\tdestination\tcost\n...\t...\t\t...';
            var temPlaceholder = false;

           


            function haveSave(){
            		  var dad = localStorage.getItem("grafos-db");
             if(dad != null){
				var comboBox = document.getElementById("cb_graph");
    			var dado = document.createElement("option");
    			dado.value = "3";
    			dado.text = "Stored graph";
    			comboBox.remove(3);
    			comboBox.add(dado, comboBox.options[3]);
    		}

            }
            
            function inserePlaceholder() {
            	//haveSave();


                if(document.getElementById('input').value == placeholder | document.getElementById('input').value == ''){
                    document.getElementById('input').value = placeholder;
                    temPlaceholder = true;
                }
            }

            function removePlaceholder() {
            	var e = document.getElementById("cb_graph");
                if(temPlaceholder && e.options[e.selectedIndex].value == 0){
                    document.getElementById('input').value = '';
                    temPlaceholder = false;
                }
            }

            // Retorna um número aleatório min (inclusivo) e max (exclusivo)
			function getRandomArbitrary(min, max) {
  				return Math.floor(Math.random() * (max - min)) + min;
			}

            function geraGrafo(){
            	var e = document.getElementById("cb_graph");
				var itemSelecionado = e.options[e.selectedIndex].value;
				if(itemSelecionado==0){
					placeholder = 'n\nsource\tdestination\tcost\nsource\tdestination\tcost\n...\t...\t\t...';
					document.getElementById('input').value = placeholder;
					temPlaceholder = true;
				}else{
					if(itemSelecionado==1){
						var placeholder = '5';
                        var numArestas = getRandomArbitrary(7,15);
                        for (var i = 0; i < numArestas; i++) {
                            placeholder=placeholder+'\n'+getRandomArbitrary(0,5)+' '+ getRandomArbitrary(0,5)+' '+ getRandomArbitrary(1,10);
                        }
                        document.getElementById('input').value = placeholder;
					}else if(itemSelecionado==2){
						var placeholder = '10';
						var numArestas = getRandomArbitrary(15,30);
						for (var i = 0; i < numArestas; i++) {
							placeholder=placeholder+'\n'+getRandomArbitrary(0,10)+' '+ getRandomArbitrary(0,10)+' '+ getRandomArbitrary(1,300);
						}
			    		document.getElementById('input').value = placeholder;
					}else{
						document.getElementById('input').value = localStorage.getItem("grafos-db");


					}
				}
            }

            function salvarGrafo(){
				localStorage.setItem("grafos-db", document.getElementById('input').value);
    			alert('Graph successfully saved! If there was a previous saved graph, it was replaced.');
            }

            function limpaDados(){
            	localStorage.setItem("dijkstra-inicio", '');
                localStorage.setItem("dijkstra-final", '');
                localStorage.setItem("dijkstra-input", '');
                location.reload();
            }
        </script>

        <link rel="stylesheet" type="text/css" href="css/style.css">
        <link rel="icon" type="image/png" href="img/icon.png" />
    </head>
    <body onload="inserePlaceholder()">
        <div id="header">
            <!-- <img src="img/logo.png" width="600" height="160" alt="The Dijkstra Solver"/> -->
            <br/>
            <label style=" letter-spacing:-8px;margin-left: 30px;font-family: helvetica; font-size:58pt; text-shadow: gray 0.05em 0.01em 0.07em">Dijkstra's Solver</label>
            <label style=" letter-spacing:-1px;margin-left: -7px;font-family: helvetica; font-size:10pt;">version 1.0</label>
        </div>
        <div id="content">
            <div id="data">
            <table>
            			<tr>
                    	<label>Examples:</label>  
                    </tr>
                    <tr>
                        <td colspan="3">
                            <select id="cb_graph" onchange="geraGrafo();" onfocus="haveSave();">
                            	<option value="0">Select a graph or inform below</option> 
  								<option value="1">Small-size graph (n = 5)</option> 
  								<option value="2">Medium-size graph (n = 10)</option>
							</select>
                        </td>
                    </tr>
            </table>
                <table>
                    <tr>
                    <label>Enter the amout of vertices (n) and the arcs as follows:</label>  
                    </tr>
                    <tr>
                        <td colspan="3">
                            <textarea id="input" rows="20" cols="50" onfocus="removePlaceholder()" onblur="inserePlaceholder()" style="font-family: Courier; font-size:10pt; border-radius: 3px;"></textarea>
                            <br/>
                            <input id="button-save" type="button" class="button" value="Save graph" style="float: left; margin-left: 334px" onclick="salvarGrafo();"></input>
                        </td>
                        <td>
                        	
                        </td>
                    </tr>
                    <tr>
                        <td style="text-align: right; width: 140px;">
                            Initial vertex:
                        </td>
                        <td style="width: 60px;">
                            <input id="inicio" type="input" size="5" style="font-family: Courier; font-size:10pt;"/></br>
                        </td>
                        <td rowspan="2">
                            <input id="button" type="button" class="button" value="Run"></input>
                            <input id="button-clean" type="button" class="button" onclick="limpaDados();" value="Clear" ></input> 
                        </td>
                    </tr>
                    <tr>
                        <td style="text-align: right;">
                            Final vertex:
                        </td>
                        <td>
                            <input id="fim" type="input" size="5" style="font-family: Courier; font-size:10pt;">
                        </td>
                    </tr>
                </table>
            </div>
            <div id="graph">
                <canvas id="viewport" width="640" height="530">
                    Sorry :(, your browser is out of date. Please update it.
                </canvas>
            </div>
        </div>
		<hr/>
        <div id="footer">
            <a href="http://www.udesc.br">Universidade do Estado de Santa Catarina</a> - <a href="http://www.ceavi.udesc.br">Centro de Educação do Alto Vale do Itajaí</a></br>
            Developed by <a href="https://github.com/gabrielnaoto">Gabriel Naoto</a>, Jandir Luiz Habitzreuter, <a href="https://github.com/luhoscher">Luma Hoscher</a>, <a href="https://github.com/MarkosCamargo">Marcos Rufino de Camargo</a>, <a href="https://github.com/silasiebert">Sila Siebert</a></br>
            Professor: <a href="http://inf.ufrgs.br/~mdesouza/">Marcelo de Souza</a>
		</div>
		<hr/>
    </body>
</html>
